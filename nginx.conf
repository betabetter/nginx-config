events {
  worker_connections  1024;  ## Default: 1024
}
http {
  # Front-end server (live mode)
  server {
    server_name betabetter.test;
    # Get files from dist if possible
    location / {
      index /etc/nginx/public;
    }
    # Serve routes from the backend service if that fails:
    location @fallback {
      set $docker_host "bb-backend";
      proxy_pass http://$docker_host:9009;
    }
    # Define a custom 404 page, too:
    error_page 404 /404.html;
    location = /404.html {
        internal;
        root /etc/nginx/public/404.html;
    }
  }
}
